---
title: 快速开始
article: false
author: 
  name: rulego
  link: https://github.com/rulego/rulego
date: 2023-09-08 15:17:40
permalink: /pages/4af819/
---


## 安装

使用`go get`命令安装`RuleGo`：

```bash
go get github.com/rulego/rulego
```

## 使用

首先使用Json格式定义规则链。规则链的定义不需要学习特定的规则语法或者DSL，只需配置组件，并把他们通过一定的关系连接起来，即可实现你的功能需求。[参考规则链](/pages/6f46fc/)    

RuleGo 使用极其简单和轻量级。只需以下2步：

1. 导入`RuleGo`包，并使用规则链定义，创建一个规则引擎实例：

以下示例是一个简单的规则链定义，它包含一个过滤器、一个转换器、一个推送数据组件，
它会过滤掉设备ID为`aa`的设备数据，并把设备ID为`aa`的设备数据推送到远程服务器。
```go
import "github.com/rulego/rulego"
var ruleFile=`{
{
  "ruleChain": {
    "id":"chain_call_rest_api",
    "name": "测试规则链",
    "root": true
  },
  "metadata": {
    "nodes": [
      {
        "id": "s1",
        "type": "jsFilter",
        "name": "过滤",
        "debugMode": true,
        "configuration": {
          "jsScript": "return msg.deviceId=='aa';"
        }
      },
      {
        "id": "s2",
        "type": "jsTransform",
        "name": "转换",
        "debugMode": true,
        "configuration": {
          "jsScript": "metadata['test']='test02';\n metadata['index']=52;\n msgType='TEST_MSG_TYPE2';\n  msg['aa']=66; return {'msg':msg,'metadata':metadata,'msgType':msgType};"
        }
      },
      {
        "id": "s3",
        "type": "restApiCall",
        "name": "推送数据",
        "debugMode": true,
        "configuration": {
          "restEndpointUrlPattern": "http://192.168.1.1:9099/api/msg",
          "requestMethod": "POST",
          "maxParallelRequestsCount": 200
        }
      }
    ],
    "connections": [
      {
        "fromId": "s1",
        "toId": "s2",
        "type": "True"
      },
      {
        "fromId": "s2",
        "toId": "s3",
        "type": "Success"
      }
    ]
  }
}
}
`
//使用规则链定义，创建一个规则引擎实例
ruleEngine, err := rulego.New("rule01", []byte(ruleFile))
```

2. 把消息负荷、消息类型、消息元数据交给规则引擎实例处理，然后规则引擎就会根据规则链的定义处理消息：

```go
//定义消息元数据
metaData := types.NewMetadata()
metaData.PutValue("productType", "test01")
//定义消息负荷和消息类型
msg := types.NewMsg(0, "TELEMETRY_MSG", types.JSON, metaData, "{\"deviceId\":\"aa\",\"temperature\":35}")

//把消息交给规则引擎处理
ruleEngine.OnMsg(msg)
```

规则引擎实例管理：

```go
//通过规则链ID获取已经创建的规则引擎实例
ruleEngine, ok := rulego.Get("rule01")
//删除已经创建的规则引擎实例
rulego.Del("rule01")
```

## 其他
1. 我们内置了大量的[标准组件](/en/pages/88fc3c/) 和 [扩展组件](/en/pages/d7fc43/) ，你只需要通过配置的方式组合这些组件，实现你的功能需求。
2. 你也可以很容易地开发自己的组件，参考 [自定义组件](/en/pages/caed1b/) 。
3. 我们也提供了一个可独立部署轻量级的[规则引擎服务](/en/pages/rulego-server/) ，可以让你不需要写代码，只要编写规则链，实现你的需求。支持通过HTTP接口执行规则链。

## 小结

RuleGo 使用极其简单和轻量级。只需以下2步：
- 1.使用Json格式的规则链定义业务逻辑，并根据该规则链初始化规则引擎。
- 2.然后把消息或者事件交给规则引擎实例，每条消息或者事件就会按照规则链定义的逻辑进行处理，规则链支持热更新。

RuleGo 虽然轻但很强大，我们继续阅读其他章节往下探索......
