---
title: æ¦‚è¿°
date: 2024-01-15 10:01:00
permalink: /pages/streamsql-overview/
article: false
author: 
  name: StreamSQL
  link: https://github.com/rulego/streamsql
---

# æ¦‚è¿°

## StreamSQL æ˜¯ä»€ä¹ˆ

StreamSQL æ˜¯ä¸€ä¸ªä¸“ä¸ºç‰©è”ç½‘è¾¹ç¼˜åœºæ™¯è®¾è®¡çš„è½»é‡çº§æµå¤„ç†å¼•æ“ã€‚å®ƒä½¿ç”¨ç†Ÿæ‚‰çš„SQLè¯­æ³•æ¥å¤„ç†æ— ç•Œæ•°æ®æµï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿç”¨ç®€å•çš„SQLè¯­å¥å®ç°å¤æ‚çš„å®æ—¶æ•°æ®åˆ†æã€‚å®ƒä¹Ÿå¯ä»¥ä½œä¸º[RuleGo](https://rulego.cn)ç»„ä»¶èå…¥RuleGoç”Ÿæ€ï¼Œåˆ©ç”¨å…¶æä¾›ä¸°å¯Œçš„è¾“å…¥è¾“å‡ºä»¥åŠæ•°æ®å¤„ç†ç»„ä»¶åº“å’Œè§„åˆ™å¼•æ“åŠŸèƒ½ã€‚

### æ ¸å¿ƒä»·å€¼
- **é™ä½é—¨æ§›**ï¼šä½¿ç”¨æ ‡å‡†SQLè¯­æ³•ï¼Œæ— éœ€å­¦ä¹ å¤æ‚çš„æµå¤„ç†æ¡†æ¶
- **è¾¹ç¼˜ä¼˜åŒ–**ï¼šä¸“ä¸ºèµ„æºå—é™çš„è¾¹ç¼˜è®¾å¤‡è®¾è®¡
- **å³æ’å³ç”¨**ï¼šé›¶é…ç½®å¯åŠ¨ï¼Œå‡ è¡Œä»£ç å³å¯è¿è¡Œ
- **ç”Ÿäº§å°±ç»ª**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œèµ„æºç®¡ç†æœºåˆ¶

## æ ¸å¿ƒæ¶æ„

```mermaid
graph TB
    A[æ•°æ®æº] --> B[StreamSQLå¼•æ“]
    B --> C[SQLè§£æå™¨]
    B --> D[æµå¤„ç†å™¨]
    B --> E[çª—å£ç®¡ç†å™¨]
    B --> F[å‡½æ•°ç³»ç»Ÿ]
    B --> G[ç»“æœè¾“å‡º]
    
    C --> H[ASTæŠ½è±¡è¯­æ³•æ ‘]
    D --> I[æ•°æ®ç®¡é“]
    E --> J[æ—¶é—´çª—å£]
    F --> K[å†…ç½®å‡½æ•°]
    F --> L[è‡ªå®šä¹‰å‡½æ•°]
```

### æ ¸å¿ƒç»„ä»¶

1. **SQLè§£æå™¨ (rsql)**
   - è§£ææ ‡å‡†SQLè¯­å¥
   - ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘(AST)
   - é…ç½®æµå¤„ç†ç®¡é“

2. **æµå¤„ç†å™¨ (stream)**
   - å®æ—¶æ•°æ®å¤„ç†
   - è¿‡æ»¤å’Œè½¬æ¢
   - èšåˆè®¡ç®—

3. **çª—å£ç®¡ç†å™¨ (window)**
   - æ—¶é—´çª—å£ï¼šæ»šåŠ¨ã€æ»‘åŠ¨ã€ä¼šè¯
   - è®¡æ•°çª—å£
   - çª—å£ç”Ÿå‘½å‘¨æœŸç®¡ç†

4. **å‡½æ•°ç³»ç»Ÿ (functions)**
   - 60+ å†…ç½®å‡½æ•°
   - æ’ä»¶å¼è‡ªå®šä¹‰å‡½æ•°
   - 8ç§å‡½æ•°ç±»å‹æ”¯æŒ

5. **è¡¨è¾¾å¼å¼•æ“ (expr)**
   - ç®—æœ¯è¡¨è¾¾å¼è®¡ç®—
   - é€»è¾‘è¡¨è¾¾å¼å¤„ç†
   - å­—æ®µå¼•ç”¨è§£æ

## è®¾è®¡ç†å¿µ

ğŸª¶ **è½»é‡çº§ä¼˜å…ˆ**ï¼šçº¯Goå®ç°ï¼Œé›¶å¤–éƒ¨ä¾èµ–ï¼Œå†…å­˜é«˜æ•ˆï¼Œç§’çº§å¯åŠ¨ã€‚ä¸“ä¸ºè¾¹ç¼˜è®¾å¤‡å’Œèµ„æºå—é™ç¯å¢ƒè®¾è®¡ã€‚

ğŸ“ **SQLä¼˜å…ˆ**ï¼šä½¿ç”¨æ ‡å‡†SQLè¯­æ³•ï¼Œå£°æ˜å¼ç¼–ç¨‹ï¼Œä¸šåŠ¡é€»è¾‘ç›´è§‚è¡¨è¾¾ï¼Œå­¦ä¹ æˆæœ¬æä½ã€‚

ğŸ”§ **æ‰©å±•ä¼˜å…ˆ**ï¼šæ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒçƒ­æ’æ‹”å‡½æ•°ï¼Œä¸RuleGoæ·±åº¦é›†æˆï¼Œåˆ©ç”¨å…¶ä¸°å¯Œçš„è¾“å…¥è¾“å‡ºç»„ä»¶ç”Ÿæ€ï¼Œå¹¶æ”¯æŒçƒ­æ›´æ–°ã€‚

## æŠ€æœ¯ç‰¹ç‚¹

- ğŸš€ **é«˜æ€§èƒ½**ï¼šæµå¼å¤„ç†ï¼Œå†…å­˜è®¡ç®—ï¼Œå¹¶å‘è®¾è®¡ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸æ€§èƒ½ã€‚
- ğŸ”§ **æ˜“äºä½¿ç”¨**ï¼šSQLè¯­æ³•ï¼Œç®€å•APIï¼Œå‡ è¡Œä»£ç å³å¯å¯åŠ¨ï¼Œä¸°å¯Œç¤ºä¾‹è¦†ç›–å¸¸è§åœºæ™¯ã€‚
- ğŸ›¡ï¸ **ç”Ÿäº§å°±ç»ª**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œèµ„æºç®¡ç†æœºåˆ¶ï¼Œå¯é…ç½®çš„æ—¥å¿—ç³»ç»Ÿã€‚
- ğŸ”„ **RuleGoé›†æˆ**ï¼šä¸RuleGoæ·±åº¦é›†æˆï¼Œåˆ©ç”¨å…¶ä¸°å¯Œçš„ç»„ä»¶ç”Ÿæ€ï¼š
  - **æ•°æ®è¾“å…¥**ï¼šMQTTã€HTTPã€WebSocketã€TCP/UDPã€æ–‡ä»¶ç­‰
  - **æ•°æ®è¾“å‡º**ï¼šæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€REST APIã€é‚®ä»¶ã€çŸ­ä¿¡ç­‰
  - **æ•°æ®å¤„ç†**ï¼šè¿‡æ»¤ã€è½¬æ¢ã€è·¯ç”±ã€èšåˆç­‰60+ç»„ä»¶
  - **æ‰©å±•èƒ½åŠ›**ï¼šè‡ªå®šä¹‰ç»„ä»¶ã€çƒ­æ’æ‹”ã€åŠ¨æ€é…ç½®

## ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”

| ç‰¹æ€§ | StreamSQL | Apache Flink | Apache Storm | ksqlDB | eKuiper |
|------|-----------|--------------|--------------|--------|----------|
| **éƒ¨ç½²å¤æ‚åº¦** | æç®€ | å¤æ‚ | ä¸­ç­‰ | ä¸­ç­‰ | ç®€å• |
| **èµ„æºå ç”¨** | æä½ | é«˜ | ä¸­ç­‰ | é«˜ | ä½ |
| **SQLæ”¯æŒ** | âœ… å®Œæ•´ | âœ… å®Œæ•´ | âŒ æ—  | âœ… å®Œæ•´ | âœ… å®Œæ•´ |
| **è¾¹ç¼˜éƒ¨ç½²** | âœ… ä¼˜ç§€ | âŒ ä¸é€‚åˆ | âš ï¸ å‹‰å¼º | âŒ ä¸é€‚åˆ | âœ… ä¼˜ç§€ |
| **å­¦ä¹ æˆæœ¬** | æä½ | é«˜ | é«˜ | ä¸­ç­‰ | ä½ |
| **è‡ªå®šä¹‰å‡½æ•°** | âœ… çƒ­æ’æ‹” | âœ… æ”¯æŒ | âš ï¸ éœ€æ‰“åŒ… | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| **åµŒå¥—å­—æ®µ** | âœ… åŸç”Ÿæ”¯æŒ | âš ï¸ éœ€é…ç½® | âŒ ä¸æ”¯æŒ | âš ï¸ æœ‰é™ | âœ… æ”¯æŒ |
| **å¼€å‘è¯­è¨€** | Go | Java/Scala | Clojure | Java | Go |

## é€‚ç”¨åœºæ™¯

### âœ… é€‚åˆåœºæ™¯
- **è¾¹ç¼˜è®¡ç®—**ï¼šç‰©è”ç½‘è®¾å¤‡ã€å·¥ä¸šç½‘å…³ã€è¾¹ç¼˜æœåŠ¡å™¨
- **å®æ—¶åˆ†æ**ï¼šè®¾å¤‡ç›‘æ§ã€å¼‚å¸¸æ£€æµ‹ã€å®æ—¶å‘Šè­¦
- **å¿«é€Ÿéƒ¨ç½²**ï¼šå•æœºéƒ¨ç½²ã€å®¹å™¨åŒ–ã€åµŒå…¥å¼åº”ç”¨
- **åŸå‹éªŒè¯**ï¼šå¿«é€ŸéªŒè¯æµå¤„ç†é€»è¾‘å’Œä¸šåŠ¡è§„åˆ™
- **RuleGoå¢å¼º**ï¼šä¸ºRuleGoè§„åˆ™é“¾æ·»åŠ SQLæµå¤„ç†èƒ½åŠ›

### âŒ ä¸é€‚åˆåœºæ™¯
- **å¤§è§„æ¨¡é›†ç¾¤**ï¼šéœ€è¦æ°´å¹³æ‰©å±•çš„åˆ†å¸ƒå¼ç³»ç»Ÿ
- **å¤æ‚çŠ¶æ€**ï¼šéœ€è¦æŒä¹…åŒ–çŠ¶æ€ç®¡ç†çš„åº”ç”¨
- **é«˜å¹¶å‘å†™å…¥**ï¼šè¶…å‡ºå•æœºå¤„ç†èƒ½åŠ›çš„æ•°æ®é‡
- **äº‹åŠ¡å¤„ç†**ï¼šéœ€è¦ACIDç‰¹æ€§çš„å¤æ‚äº‹åŠ¡åœºæ™¯

## æ ¸å¿ƒåº”ç”¨åœºæ™¯

### ğŸ­ å·¥ä¸šç‰©è”ç½‘
**è®¾å¤‡ç›‘æ§ä¸é¢„æµ‹æ€§ç»´æŠ¤**ï¼šå®æ—¶ç›‘æ§è®¾å¤‡çŠ¶æ€ï¼Œå¼‚å¸¸æ£€æµ‹ï¼Œé¢„æµ‹æ€§ç»´æŠ¤

```sql
-- è®¾å¤‡å¼‚å¸¸æ£€æµ‹ç¤ºä¾‹
SELECT device_id,
       AVG(temperature) as avg_temp,
       STDDEV(vibration) as vibration_variance,
       CASE WHEN AVG(temperature) > 80 OR STDDEV(vibration) > 5 
            THEN 'ALERT' ELSE 'NORMAL' END as status
FROM stream
GROUP BY device_id, TumblingWindow('5m')
HAVING status = 'ALERT'
```

### ğŸ™ï¸ æ™ºæ…§åŸå¸‚
**äº¤é€šæµé‡ä¼˜åŒ–**ï¼šå®æ—¶åˆ†æäº¤é€šæµé‡ï¼Œæ‹¥å µæ£€æµ‹ï¼Œä¿¡å·ç¯ä¼˜åŒ–
**ç¯å¢ƒç›‘æµ‹**ï¼šç©ºæ°”è´¨é‡ç›‘æµ‹ï¼Œæ±¡æŸ“é¢„è­¦ï¼Œç¯å¢ƒæ•°æ®åˆ†æ

### ğŸš— è½¦è”ç½‘
**è½¦è¾†çŠ¶æ€ç›‘æ§**ï¼šå®æ—¶ç›‘æ§è½¦è¾†è¿è¡ŒçŠ¶æ€ï¼Œæ•…éšœè¯Šæ–­ï¼Œé©¾é©¶è¡Œä¸ºåˆ†æ

```sql
-- è½¦è¾†å¼‚å¸¸æ£€æµ‹
SELECT vehicle_id,
       AVG(engine_temp) as avg_engine_temp,
       COUNT(CASE WHEN brake_pressure > 80 THEN 1 END) as hard_brake_count
FROM stream
GROUP BY vehicle_id, TumblingWindow('10m')
HAVING avg_engine_temp > 90 OR hard_brake_count > 5
```

### ğŸ’° é‡‘èé£æ§
**å®æ—¶é£æ§**ï¼šäº¤æ˜“è¡Œä¸ºåˆ†æï¼Œæ¬ºè¯ˆæ£€æµ‹ï¼Œé£é™©è¯„åˆ†

```sql
-- å¼‚å¸¸äº¤æ˜“æ£€æµ‹
SELECT user_id,
       COUNT(*) as transaction_count,
       SUM(amount) as total_amount
FROM stream
WHERE amount > 0
GROUP BY user_id, TumblingWindow('1h')
HAVING transaction_count > 20 OR total_amount > 10000
```

### ğŸ¢ æ™ºèƒ½å»ºç­‘
**èƒ½è€—ä¼˜åŒ–**ï¼šå®æ—¶ç›‘æ§å»ºç­‘èƒ½è€—ï¼Œè®¾å¤‡æ§åˆ¶ï¼ŒèŠ‚èƒ½åˆ†æ
**å®‰é˜²ç›‘æ§**ï¼šå¼‚å¸¸è¡Œä¸ºæ£€æµ‹ï¼Œè‡ªåŠ¨æŠ¥è­¦ï¼Œå®‰å…¨é˜²æŠ¤



## ä¸‹ä¸€æ­¥

- ğŸ“š [å¿«é€Ÿå¼€å§‹](/pages/streamsql-quickstart/) - 5åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
- ğŸ§© [æ ¸å¿ƒæ¦‚å¿µ](/pages/streamsql-concepts/) - ç†è§£åŸºæœ¬æ¦‚å¿µ
- ğŸªŸ [çª—å£](/pages/streamsql-window/) - æ·±å…¥äº†è§£çª—å£å¤„ç†
- ğŸ’» [æ¡ˆä¾‹é›†é”¦](/pages/streamsql-cases-overview/) - æŸ¥çœ‹å®é™…æ¡ˆä¾‹
- ğŸ“– [APIå‚è€ƒ](/pages/streamsql-api/) - å®Œæ•´çš„APIæ–‡æ¡£