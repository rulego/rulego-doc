---
title: çª—å£å‡½æ•°
date: 2024-01-15 10:07:00
permalink: /pages/streamsql-window-functions/
article: false
author: 
  name: StreamSQL
  link: https://github.com/rulego/streamsql
---

# StreamSQL çª—å£å‡½æ•°

çª—å£å‡½æ•°æä¾›çª—å£ç›¸å…³çš„ä¿¡æ¯ã€‚

## WINDOW_START - çª—å£å¼€å§‹æ—¶é—´
**è¯­æ³•**: `window_start()`  
**æè¿°**: è¿”å›å½“å‰çª—å£çš„å¼€å§‹æ—¶é—´ã€‚  
**å¢é‡è®¡ç®—**: âœ… æ”¯æŒ  
**ç¤ºä¾‹**:
```sql
SELECT device, window_start() as window_begin, avg(temperature) as avg_temp 
FROM stream 
GROUP BY device, TumblingWindow('10s')
```

## WINDOW_END - çª—å£ç»“æŸæ—¶é—´
**è¯­æ³•**: `window_end()`  
**æè¿°**: è¿”å›å½“å‰çª—å£çš„ç»“æŸæ—¶é—´ã€‚  
**å¢é‡è®¡ç®—**: âœ… æ”¯æŒ  
**ç¤ºä¾‹**:
```sql
SELECT device, window_end() as window_finish, avg(temperature) as avg_temp 
FROM stream 
GROUP BY device, TumblingWindow('10s')
```

## æ‰©å±•çª—å£å‡½æ•°

æ‰©å±•çª—å£å‡½æ•°æä¾›æ›´å¤šçª—å£ç›¸å…³åŠŸèƒ½ã€‚

### ROW_NUMBER - è¡Œå·å‡½æ•°
**è¯­æ³•**: `row_number() OVER (ORDER BY col)`  
**æè¿°**: ä¸ºç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„è¡Œå·ã€‚  
**å¢é‡è®¡ç®—**: âœ… æ”¯æŒ  

### LEAD - å‰å¯¼å‡½æ•°
**è¯­æ³•**: `lead(col, offset, default_value) OVER (ORDER BY col)`  
**æè¿°**: è¿”å›å½“å‰è¡Œä¹‹åç¬¬Nè¡Œçš„å€¼ã€‚  
**å¢é‡è®¡ç®—**: âœ… æ”¯æŒ  

### NTH_VALUE - ç¬¬Nä¸ªå€¼å‡½æ•°
**è¯­æ³•**: `nth_value(col, n) OVER (ORDER BY col)`  
**æè¿°**: è¿”å›çª—å£ä¸­ç¬¬Nè¡Œçš„å€¼ã€‚  
**å¢é‡è®¡ç®—**: âœ… æ”¯æŒ  

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [èšåˆå‡½æ•°](/pages/streamsql-aggregate-functions/) - äº†è§£èšåˆå‡½æ•°çš„è¯¦ç»†ç”¨æ³•
- [åˆ†æå‡½æ•°](/pages/streamsql-analytical-functions/) - äº†è§£åˆ†æå‡½æ•°çš„è¯¦ç»†ç”¨æ³•
- [SQLå‚è€ƒ](/pages/streamsql-sql/) - æŸ¥çœ‹å®Œæ•´çš„SQLè¯­æ³•å‚è€ƒ