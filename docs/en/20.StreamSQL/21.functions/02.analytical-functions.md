---
title: Analytical Functions
date: 2024-01-15 10:07:00
permalink: /pages/streamsql-analytical-functions/
article: false
author: 
  name: StreamSQL
  link: https://github.com/rulego/streamsql
---

# StreamSQL Analytical Functions

Analytical functions are used for complex analytical calculations in data streams, supporting state management and historical data access.

## LAG - Lag Function
**Syntax**: `lag(col, offset, default_value)`  
**Description**: Returns the value from the Nth row before the current row. offset specifies the offset amount, default_value is the default value.  
**Incremental Calculation**: âœ… Supported  
**Example**:
```sql
SELECT device, temperature, lag(temperature, 1) as prev_temp 
FROM stream 
GROUP BY device, TumblingWindow('10s')
```

## LATEST - Latest Value Function
**Syntax**: `latest(col)`  
**Description**: Returns the latest value for the specified column.  
**Incremental Calculation**: âœ… Supported  
**Example**:
```sql
SELECT device, latest(temperature) as current_temp 
FROM stream 
GROUP BY device, TumblingWindow('10s')
```

## CHANGED_COL - Changed Column Function
**Syntax**: `changed_col(row_data)`  
**Description**: Returns an array of column names that have changed.  
**Incremental Calculation**: âœ… Supported  
**Example**:
```sql
SELECT device, changed_col(*) as changed_columns 
FROM stream 
GROUP BY device, TumblingWindow('10s')
```

## HAD_CHANGED - Change Detection Function
**Syntax**: `had_changed(col)`  
**Description**: Determines whether the value of the specified column has changed, returning a boolean value.  
**Incremental Calculation**: âœ… Supported  
**Example**:
```sql
SELECT device, had_changed(status) as status_changed 
FROM stream 
GROUP BY device, TumblingWindow('10s')
```

## ðŸ“š Related Documentation

- [Aggregate Functions](/en/pages/streamsql-aggregate-functions/) - Learn detailed usage of aggregate functions
- [Window Functions](/en/pages/streamsql-window-functions/) - Learn detailed usage of window functions
- [SQL Reference](/en/pages/streamsql-sql/) - View complete SQL syntax reference